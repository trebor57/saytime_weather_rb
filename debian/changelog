saytime-weather-rb (0.0.5-1) unstable; urgency=medium

  * weather.rb: Fix NoMethodError when using airport codes with additional weather data
    - Fixed bug where using IATA/ICAO airport codes with show_humidity, show_wind,
      show_pressure, or show_precipitation enabled would cause a NoMethodError
    - Moved weather_data initialization before first use to ensure it's always a hash
    - METAR data (airport codes) doesn't provide additional weather fields, but code
      now safely handles missing fields without errors

 -- Jory A. Pratt <geekypenguin@gmail.com>  Sun, 25 Jan 2026 12:15:09 -0600

saytime-weather-rb (0.0.4-1) unstable; urgency=medium

  * weather.rb: Add IATA airport code support
    - Added support for 3-letter IATA airport codes (e.g., JFK, LHR, DFW)
    - Automatically converts IATA codes to ICAO codes for METAR lookups
    - Includes comprehensive lookup table for international airports
    - Updated help text and error messages to document IATA support
  * weather.rb: Add additional weather data display options
    - Added show_precipitation option with automatic unit selection (inches/mm)
    - Added show_wind option with automatic unit selection (mph/km/h)
    - Added show_pressure option with automatic unit selection (inHG/hPa)
    - Units automatically match Temperature_mode setting (F = imperial, C = metric)
    - Wind display includes direction (cardinal) and gusts when available
  * weather.rb: Add humidity display option
    - Added show_humidity option to display relative humidity percentage
    - Retrieves humidity data from both Open-Meteo and NWS APIs
    - Displays as "65% RH" format
  * weather.rb: Add zero precipitation handling
    - Added show_zero_precip option to control zero precipitation display
    - Added precip_trace_mm option for minimum precipitation threshold
    - Improves output quality by hiding trace amounts when not needed
  * weather.rb: Update API fetch methods for additional data
    - Modified fetch_weather_openmeteo() to retrieve precipitation, wind, pressure, humidity
    - Modified fetch_weather_nws() to retrieve precipitation, wind, pressure, humidity
    - Changed return format to hash for better data organization
  * weather.rb: Add unit conversion functions
    - Added mm_to_inches() for precipitation conversion
    - Added ms_to_mph() and ms_to_kmh() for wind speed conversion
    - Added hpa_to_inhg() for pressure conversion
    - Added wind_direction_to_cardinal() for wind direction display
  * weather.ini.default: Add documentation for new options
    - Documented all new configuration options with examples


 -- Jory A. Pratt <geekypenguin@gmail.com>  Sun, 25 Jan 2026 10:52:49 -0600

saytime-weather-rb (0.0.3-1) unstable; urgency=medium

  * saytime.rb: Fix custom sound directory path validation
    - Fixed is_safe_path() to properly validate custom sound directories
    - Custom sound directories via --sound-dir option now work correctly
  * saytime.rb: Improve playback method option
    - Changed -m/--method to accept explicit method value (localplay or playback)
    - Improved option help text for clarity
  * saytime.rb: Improve timezone sanitization logic
    - Enhanced timezone validation to properly handle timezones with spaces
    - Better error handling and fallback logic
  * weather.rb: Add safe hash access for coordinate extraction
    - Added validation before accessing JSON response coordinates
    - Prevents potential errors from unexpected API response structures
  * weather.rb: Use buffered file reading for condition sound files
    - Changed to buffered reading using HTTP_BUFFER_SIZE constant
    - More memory efficient for large sound files
    - Consistent with saytime.rb implementation
  * weather.rb: Extract duplicate timezone file writing code
    - Created write_timezone_file() helper method
    - Eliminates code duplication between fetch methods
  * weather.rb: Code cleanup and documentation
    - Removed trailing empty line in create_default_config()
    - Added clarifying comments for fallthrough logic
    - Improved code maintainability

 -- Jory A. Pratt <geekypenguin@gmail.com>  Mon, 19 Jan 2026 10:09:41 -0600

saytime-weather-rb (0.0.2-1) unstable; urgency=medium

  * Fix multi-word weather condition handling in weather.rb
    - Fixed issue where conditions like "Mostly Sunny" only announced the first word
    - Now properly collects and concatenates all matching word sound files
    - Preserves original word order for correct pronunciation
  * Add TZ environment variable support for timezone override
    - Users can now override timezone by setting TZ environment variable
    - TZ takes precedence over weather.rb timezone and system local time
    - Useful for UTC time announcements or custom timezone requirements
    - Example: TZ=UTC saytime.rb -l 75001 -n 123456

 -- Jory A. Pratt <geekypenguin@gmail.com>  Sun, 04 Jan 2026 10:46:26 -0600

saytime-weather-rb (0.0.1-1) unstable; urgency=medium

  * Initial Debian package release
  * Ruby implementation of time and weather announcement system for Asterisk PBX
  * Complete rewrite in Ruby with zero external dependencies
  * Uses only Ruby standard library - no gem dependencies required
  * Supports Open-Meteo (worldwide) and NWS (US) weather providers
  * Features:
    - Time announcements in 12-hour or 24-hour formats
    - Current weather conditions and temperature via postal codes, ICAO airport codes, or special locations
    - 60+ special locations including Antarctica stations, Arctic locations, DXpedition islands, and remote weather stations
    - No API keys required - uses free weather APIs
    - Location-aware timezone support using system timezone database (no tzinfo gem needed)
    - Real-time weather data from current observations (not forecasts)
    - Temperature displayed as whole numbers (rounded)
    - Improved weather condition matching for accurate sound file selection
    - NWS API support with proper coordinate precision and redirect handling
    - Simplified configuration (single config path: /etc/asterisk/local/weather.ini)
    - Resolved option conflicts between weather.rb and saytime.rb scripts
    - Code optimizations reducing total line count by ~6.4%
  * Installation:
    - Scripts installed to /usr/sbin (requires root/sudo)
    - All files owned by asterisk:asterisk for proper Asterisk dialplan access
    - Default config installed only if no existing config present
    - Sound files installed to /usr/share/asterisk/sounds/en/ and /usr/share/asterisk/sounds/en/wx/

 -- Jory A. Pratt <geekypenguin@gmail.com>  Mon, 30 Dec 2025 12:00:00 -0600

